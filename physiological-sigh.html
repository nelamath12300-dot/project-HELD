<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Physiological Sigh</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
:root{
  --bg:#051411;
  --text:#00050e;
  --muted:#010811;

  --pink:#25040b;
  --yellow:#866206;
  --teal:#07255c;
  --green:#23442b;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  min-height:100vh;
  background:radial-gradient(circle at top,#75c493,#e0e777);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Georgia,serif;
  position:relative;
}

/* BACK BUTTON */
.back-btn{
  position:absolute;
  top:30px;
  left:34px;
  padding:10px 18px;
  border-radius:999px;
  background:rgba(160, 170, 19, 0.15);
  color:#000000;
  font-size:14px;
  cursor:pointer;
}
.back-btn:hover{
  background:rgba(14, 2, 12, 0);
}

.screen{
  width:100%;
  max-width:420px;
  height:90vh;
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:24px;
}

.screen.active{display:flex;}

h1{font-size:2rem;margin-bottom:12px;}
p{color:var(--muted);margin-bottom:24px;}

button{
  border:none;
  border-radius:999px;
  padding:14px 40px;
  font-size:1rem;
  background:white;
  cursor:pointer;
}

/* Animation */
.animation{
  width:260px;
  height:260px;
  position:relative;
  margin-bottom:30px;
}

.dot{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  opacity:0.9;
  transition:transform 6s ease, background 2s ease;
}

.instruction{
  font-size:1.6rem;
  margin-top:10px;
  transition:color 1.5s ease;
}

/* Feedback */
.feedback{
  display:flex;
  gap:14px;
}

.feedback button{
  background:transparent;
  color:white;
  border:1px solid #444;
  width:120px;
}
</style>
</head>

<body>

<!-- BACK BUTTON -->
<div class="back-btn" onclick="location.href='breathing.html'">← Back</div>

<!-- INTRO -->
<div class="screen active" id="intro">
  <h1>Physiological Sigh</h1>
  <p>
    A gentle breathing pattern that helps your body<br/>
    release built-up stress naturally.
  </p>
  <p>⏱ 1 minute · Calm pace</p>
  <button onclick="start()">Begin</button>
</div>

<!-- PRACTICE -->
<div class="screen" id="practice">
  <div class="animation" id="animation"></div>
  <div class="instruction" id="instruction"></div>
</div>

<!-- DONE SCREEN -->
<div class="screen" id="done">
  <h1>You stayed with the process — well done</h1>
  <button id="doneBtn" onclick="completePractice()">Done</button>
</div>

<!-- FEEDBACK -->
<div class="screen" id="feedback">
  <h1>How helpful was<br/>this practice?</h1>
  <div class="feedback">
    <button>Not helpful</button>
    <button>A little helpful</button>
    <button>Very helpful</button>
  </div>
</div>

<script>
const intro=document.getElementById("intro");
const practice=document.getElementById("practice");
const done=document.getElementById("done");
const feedback=document.getElementById("feedback");
const animation=document.getElementById("animation");
const instruction=document.getElementById("instruction");

let dots=[];
let cycles=0;
const MAX_CYCLES=6;

function show(s){
  [intro,practice,done,feedback].forEach(x=>x.classList.remove("active"));
  s.classList.add("active");
}

function start(){
  show(practice);
  settled();
}

function settled(){
  instruction.textContent="Get settled";
  instruction.style.color="var(--green)";
  createCircle(20,"var(--green)");
  setTimeout(inhale,3000);
}

function inhale(){
  instruction.textContent="Inhale";
  instruction.style.color="var(--pink)";
  resizeCircle(60,"var(--pink)");
  setTimeout(inhaleMore,3000);
}

function inhaleMore(){
  instruction.textContent="Inhale a bit more";
  instruction.style.color="var(--yellow)";
  resizeCircle(85,"var(--yellow)");
  setTimeout(exhale,3000);
}

function exhale(){
  instruction.textContent="Exhale slowly";
  instruction.style.color="var(--teal)";
  resizeCircle(20,"var(--teal)");
  cycles++;
  if(cycles<MAX_CYCLES){
    setTimeout(inhale,7000);
  }else{
    setTimeout(()=>show(done),3000);
  }
}

function createCircle(radius,color){
  animation.innerHTML="";
  dots=[];
  const count=48;
  for(let i=0;i<count;i++){
    const dot=document.createElement("div");
    dot.className="dot";
    dot.style.background=color;
    animation.appendChild(dot);
    dots.push(dot);
  }
  positionDots(radius);
}

function resizeCircle(radius,color){
  dots.forEach(d=>d.style.background=color);
  positionDots(radius);
}

function positionDots(radius){
  const center=130;
  dots.forEach((dot,i)=>{
    const angle=(i/dots.length)*Math.PI*2;
    const x=center+radius*Math.cos(angle);
    const y=center+radius*Math.sin(angle);
    dot.style.transform=`translate(${x}px,${y}px)`;
  });
}

function completePractice(){
  const btn = document.getElementById("doneBtn");
  btn.style.background = "#7ee3d4";
  btn.style.color = "#050814";
  btn.style.transform = "scale(0.96)";
  setTimeout(() => {
    location.href="breathing.html";
  }, 600);
}
</script>

</body>
</html>
